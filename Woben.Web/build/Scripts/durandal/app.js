define(["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,r,n,a){function i(){return e.defer(function(t){return 0==s.length?(t.resolve(),void 0):(e.acquire(s).then(function(r){for(var n=0;n<r.length;n++){var a=r[n];if(a.install){var i=l[n];e.isObject(i)||(i={}),a.install(i),e.log("Plugin:Installed "+s[n])}else e.log("Plugin:Loaded "+s[n])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var o,s=[],l=[];return o={title:"Application",configurePlugins:function(t,r){var n=e.keys(t);r=r||"plugins/",-1===r.indexOf("/",r.length-1)&&(r+="/");for(var a=0;a<n.length;a++){var i=n[a];s.push(r+i),l.push(t[i])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){a(function(){i().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(n,a,i){var o,s={activate:!0,transition:a};o=!i||e.isString(i)?document.getElementById(i||"applicationHost"):i,e.isString(n)?t.isViewUrl(n)?s.view=n:s.model=n:s.model=n,r.compose(o,s)}},n.includeIn(o),o});