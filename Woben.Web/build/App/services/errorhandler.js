define(["services/logger","durandal/system","services/utils"],function(e,t,n){function r(e){return $.extend(e,new a(e))}var a=function(){var r=function(r){this.handleError=function(a){throw a.entityErrors&&(a.message=n.getSaveValidationErrorMessage(a)),e.logError(a.message,null,t.getModuleId(r),!0),a},this.log=function(n,a){e.log(n,null,t.getModuleId(r),a)},this.handlevalidationerrors=function(t){var n,r;try{n=$.parseJSON(t.responseText)}catch(a){n=null}if(n&&n.message){if(n.modelState)for(var i in n.modelState)if(r=n.modelState[i],r.length)for(var o=0;o<r.length;o++)e.logError(r[o],null,r,!0);0===r.length&&e.logError(n.message,null,n,!0)}},this.handleauthenticationerrors=function(t){if(""!=t.responseText){var n=$.parseJSON(t.responseText);n&&n.error_description?e.logError(n.error_description,null,t,!0):n.message&&e.logError(n.message,null,t,!0)}}};return r}();return{includeIn:r}});