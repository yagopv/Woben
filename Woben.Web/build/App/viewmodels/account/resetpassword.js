define(["services/appsecurity","plugins/router","services/errorhandler","services/logger"],function(e,t,r,n){var a=ko.observable().extend({required:!0,email:!0}),i=ko.observable().extend({required:!0,minLength:6}),o=ko.observable().extend({required:!0,minLength:6,equal:i}),s=ko.observable().extend({required:!0}),l={email:a,password:i,confirmpassword:o,code:s,activate:function(e){var t=this;t.email(decodeURIComponent(e.email)),t.code(decodeURIComponent(e.code)),ga("send","pageview",{page:window.location.href,title:document.title})},resetPassword:function(){var r=this;return 0!=this.errors().length?(this.errors.showAllMessages(),void 0):(e.resetPassword({eMail:r.email(),password:r.password(),confirmPassword:r.confirmpassword(),code:r.code()}).done(function(e){n.logSuccess("Your password was changed succesfully. Try to log in to your account",e,null,!0),t.navigate("account/login")}).fail(r.handlevalidationerrors),void 0)}};return r.includeIn(l),l.errors=ko.validation.group(l),l});